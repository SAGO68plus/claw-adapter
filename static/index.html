<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ClawAdapter</title>
<style>
  :root {
    --bg: #12141a;
    --bg-accent: #14161d;
    --bg-elevated: #1a1d25;
    --bg-hover: #262a35;
    --card: #181b22;
    --card-highlight: rgba(255,255,255,.05);
    --border: #27272a;
    --border-strong: #3f3f46;
    --border-hover: #52525b;
    --input: #27272a;
    --text: #e4e4e7;
    --text-strong: #fafafa;
    --muted: #71717a;
    --muted-strong: #52525b;
    --accent: #ff5c5c;
    --accent-hover: #ff7070;
    --accent-subtle: rgba(255,92,92,.15);
    --accent-glow: rgba(255,92,92,.25);
    --ok: #22c55e;
    --ok-subtle: rgba(34,197,94,.12);
    --info: #3b82f6;
    --info-subtle: rgba(59,130,246,.12);
    --warn: #f59e0b;
    --warn-subtle: rgba(245,158,11,.12);
    --danger: #ef4444;
    --danger-subtle: rgba(239,68,68,.12);
    --purple: #a78bfa;
    --purple-subtle: rgba(167,139,250,.12);
    --teal: #14b8a6;
    --teal-subtle: rgba(20,184,166,.12);
    --secondary: #1e2028;
    --mono: 'JetBrains Mono', ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, monospace;
    --font-body: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --shadow-md: 0 4px 12px rgba(0,0,0,.25), 0 0 0 1px rgba(255,255,255,.03);
    --radius: 8px;
    --sidebar-w: 200px;
    --sidebar-collapsed: 56px;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: var(--font-body); background: var(--bg); color: var(--text); min-height: 100vh; display: flex; }

  /* Sidebar */
  .sidebar {
    width: var(--sidebar-w);
    min-height: 100vh;
    background: var(--bg-accent);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    transition: width 0.2s ease;
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    z-index: 10;
  }
  .sidebar.collapsed { width: var(--sidebar-collapsed); }
  .sidebar-logo {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 18px 16px 14px;
    border-bottom: 1px solid var(--border);
    min-height: 60px;
  }
  .sidebar-logo img { width: 28px; height: 28px; flex-shrink: 0; }
  .sidebar-logo .logo-text { font-size: 0.88rem; font-weight: 700; color: var(--text-strong); white-space: nowrap; overflow: hidden; }
  .sidebar-logo .logo-text em { font-style: normal; color: var(--accent); }
  .sidebar.collapsed .logo-text { display: none; }
  .sidebar-nav { flex: 1; padding: 8px; }
  .nav-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 6px;
    cursor: pointer;
    color: var(--muted);
    font-size: 0.88rem;
    transition: all 0.15s;
    margin-bottom: 2px;
    white-space: nowrap;
    overflow: hidden;
    border: none;
    background: none;
    width: 100%;
    text-align: left;
    font-family: var(--font-body);
  }
  .nav-item:hover { color: var(--text); background: var(--bg-hover); }
  .nav-item.active { color: var(--accent); background: var(--accent-subtle); }
  .nav-item .nav-icon { font-size: 1.1rem; flex-shrink: 0; width: 24px; text-align: center; display: flex; align-items: center; justify-content: center; }
  .nav-item .nav-icon svg { width: 18px; height: 18px; stroke: currentColor; fill: none; stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round; }
  .nav-item .nav-label { overflow: hidden; }
  .sidebar.collapsed .nav-label { display: none; }
  .sidebar-footer {
    padding: 8px;
    border-top: 1px solid var(--border);
  }
  .collapse-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    padding: 8px;
    border-radius: 6px;
    cursor: pointer;
    color: var(--muted);
    font-size: 1rem;
    transition: all 0.15s;
    border: none;
    background: none;
  }
  .collapse-btn:hover { color: var(--text); background: var(--bg-hover); }

  /* Main content */
  .main-content {
    margin-left: var(--sidebar-w);
    flex: 1;
    min-height: 100vh;
    background: var(--bg);
    transition: margin-left 0.2s ease;
    padding: 24px 32px;
    max-width: calc(100% - var(--sidebar-w));
  }
  .sidebar.collapsed ~ .main-content {
    margin-left: var(--sidebar-collapsed);
    max-width: calc(100% - var(--sidebar-collapsed));
  }

  .panel { display: none; }
  .panel.active { display: block; }

  /* Cards */
  .card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-bottom: 12px; transition: border-color 0.2s; }
  .card:hover { border-color: var(--border-strong); }
  .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
  .card-title { font-weight: 600; font-size: 1rem; color: var(--text-strong); }
  .card-meta { color: var(--muted); font-size: 0.8rem; word-break: break-all; }

  /* Badges */
  .badge { display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 0.72rem; font-weight: 500; }
  .badge-accent { background: var(--accent-subtle); color: var(--accent); }
  .badge-ok { background: var(--ok-subtle); color: var(--ok); }
  .badge-info { background: rgba(255,255,255,.08); color: rgba(255,255,255,.55); }
  .badge-muted { background: var(--secondary); color: var(--muted); }

  /* Buttons */
  .btn { padding: 6px 12px; border-radius: 6px; border: 1px solid var(--border); background: transparent; color: var(--text); cursor: pointer; font-size: 0.82rem; transition: all 0.15s; font-family: var(--font-body); }
  .btn:hover { background: var(--bg-hover); border-color: var(--border-strong); }
  .btn-accent { background: var(--accent); border-color: var(--accent); color: #fff; font-weight: 600; }
  .btn-accent:hover { background: var(--accent-hover); border-color: var(--accent-hover); }
  .btn-ghost-accent { color: var(--accent); border-color: rgba(255,92,92,.25); }
  .btn-ghost-accent:hover { background: var(--accent-subtle); }
  .btn-ghost-info { color: var(--info); border-color: rgba(59,130,246,.2); }
  .btn-ghost-info:hover { background: var(--info-subtle); }
  .btn-ghost-purple { color: var(--purple); border-color: rgba(167,139,250,.2); }
  .btn-ghost-purple:hover { background: var(--purple-subtle); }
  .btn-ghost-teal { color: var(--teal); border-color: rgba(20,184,166,.2); }
  .btn-ghost-teal:hover { background: var(--teal-subtle); }
  .btn-ghost-danger { color: var(--danger); border-color: rgba(239,68,68,.15); }
  .btn-ghost-danger:hover { background: var(--danger-subtle); }
  .btn-sm { padding: 3px 9px; font-size: 0.78rem; }
  .btn-group { display: flex; gap: 5px; flex-wrap: wrap; }

  /* Forms */
  input, select, textarea { background: var(--bg); border: 1px solid var(--input); color: var(--text); padding: 8px 12px; border-radius: 6px; font-size: 0.9rem; width: 100%; transition: border-color 0.2s; font-family: var(--font-body); }
  input:focus, select:focus, textarea:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 2px var(--accent-subtle); }
  .form-group { margin-bottom: 12px; }
  .form-group label { display: block; margin-bottom: 4px; font-size: 0.85rem; color: var(--muted); }

  /* Modal */
  .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 100; backdrop-filter: blur(4px); }
  .modal { background: var(--card); border: 1px solid var(--border-strong); border-radius: 12px; padding: 24px; width: 90%; max-width: 480px; box-shadow: var(--shadow-md); }
  .modal h2 { font-size: 1.05rem; margin-bottom: 16px; color: var(--text-strong); }
  .modal-actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 16px; }
  .hidden { display: none !important; }

  /* Toast */
  .toast { position: fixed; bottom: 24px; right: 24px; padding: 10px 18px; border-radius: 8px; font-size: 0.82rem; z-index: 200; animation: fadeIn 0.3s; }
  .toast-ok { background: var(--ok-subtle); color: var(--ok); border: 1px solid rgba(34,197,94,.2); }
  .toast-err { background: var(--danger-subtle); color: var(--danger); border: 1px solid rgba(239,68,68,.2); }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

  /* Misc */
  .empty { text-align: center; padding: 40px; color: var(--muted-strong); }
  .key-display { font-family: var(--mono); background: var(--bg); padding: 3px 7px; border-radius: 4px; font-size: 0.78rem; color: var(--muted); border: 1px solid var(--border); }
  .dot { width: 7px; height: 7px; border-radius: 50%; display: inline-block; }
  .dot-green { background: var(--ok); box-shadow: 0 0 6px rgba(34,197,94,.4); }
  .dot-gray { background: var(--muted-strong); }
  .info-block { margin-top: 8px; padding: 10px; background: var(--bg); border-radius: 6px; font-size: 0.82rem; border: 1px solid var(--border); }
  .info-row { display: flex; gap: 8px; margin-bottom: 4px; }
  .info-label { color: var(--muted); min-width: 70px; }
  .info-value { color: rgba(255,255,255,.7); word-break: break-all; }

  /* Bindings */
  .binding-tag { display: inline-flex; align-items: center; gap: 4px; padding: 2px 8px; border-radius: 10px; font-size: 0.72rem; background: var(--secondary); border: 1px solid var(--border); margin: 2px; }
  .binding-tag .unbind { cursor: pointer; color: var(--danger); font-weight: bold; margin-left: 2px; opacity: 0.6; }
  .binding-tag .unbind:hover { opacity: 1; }
  .binding-sync { color: var(--ok); }
  .binding-nosync { color: var(--muted); }

  /* Vendor cards */
  .vendor-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); margin-bottom: 16px; overflow: hidden; transition: border-color 0.2s; }
  .vendor-card:hover { border-color: var(--border-strong); }
  .vendor-header { padding: 16px; border-bottom: 1px solid var(--border); }
  .vendor-body { padding: 8px 16px 16px; }
  .provider-item { padding: 10px; margin-top: 8px; background: var(--bg-accent); border-radius: 6px; border: 1px solid var(--border); }
  .provider-item .card-header { margin-bottom: 4px; }

  /* Icons */
  .entity-icon { width: 30px; height: 30px; border-radius: 6px; object-fit: cover; background: var(--secondary); border: 1px solid var(--border); flex-shrink: 0; }
  .icon-placeholder { width: 30px; height: 30px; border-radius: 6px; background: var(--accent-subtle); display: flex; align-items: center; justify-content: center; font-size: 0.8rem; flex-shrink: 0; color: var(--accent); }
  .icon-placeholder-adapter { background: var(--secondary); color: var(--muted); }

  /* Icon upload */
  .icon-upload { position: relative; cursor: pointer; display: inline-block; }
  .icon-upload input[type="file"] { position: absolute; inset: 0; opacity: 0; cursor: pointer; }
  .icon-upload-preview { width: 56px; height: 56px; border-radius: 8px; background: var(--bg); border: 1px dashed var(--border-strong); display: flex; align-items: center; justify-content: center; color: var(--muted); font-size: 0.7rem; overflow: hidden; transition: border-color 0.2s; }
  .icon-upload-preview:hover { border-color: var(--accent); }
  .icon-upload-preview img { width: 100%; height: 100%; object-fit: cover; }

  /* Dropdown menu (three-dot) */
  .dropdown { position: relative; display: inline-block; }
  .dropdown-trigger { background: none; border: 1px solid var(--border); border-radius: 6px; color: var(--muted); cursor: pointer; padding: 3px 7px; font-size: 1rem; line-height: 1; transition: all 0.15s; }
  .dropdown-trigger:hover { color: var(--text); background: var(--bg-hover); border-color: var(--border-strong); }
  .dropdown-menu { display: none; position: absolute; right: 0; top: 100%; margin-top: 4px; background: var(--card); border: 1px solid var(--border-strong); border-radius: 8px; min-width: 120px; z-index: 50; box-shadow: var(--shadow-md); overflow: hidden; }
  .dropdown-menu.open { display: block; }
  .dropdown-item { display: block; width: 100%; padding: 8px 14px; border: none; background: none; color: var(--text); font-size: 0.82rem; text-align: left; cursor: pointer; font-family: var(--font-body); }
  .dropdown-item:hover { background: var(--bg-hover); }
  .dropdown-item-danger { color: var(--danger); }
  .dropdown-item-danger:hover { background: var(--danger-subtle); }

  /* Inline icon buttons (key toggle/copy) */
  .btn-icon { background: none; border: none; cursor: pointer; font-size: 0.78rem; padding: 2px 4px; border-radius: 4px; opacity: 0.5; transition: opacity 0.15s; }
  .btn-icon:hover { opacity: 1; }

  /* Topology chart */
  #topology-chart { width: 100%; min-height: 400px; }

  /* Stats cards */
  .stat-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 14px 16px; transition: border-color 0.2s; }
  .stat-card:hover { border-color: var(--border-strong); }
  .stat-card .stat-value { font-size: 1.4rem; font-weight: 700; color: var(--text-strong); }
  .stat-card .stat-label { font-size: 0.75rem; color: var(--muted); margin-top: 2px; }

  /* Log table */
  .log-table { width: 100%; border-collapse: collapse; font-size: 0.78rem; }
  .log-table th { text-align: left; padding: 8px 10px; color: var(--muted); font-weight: 500; border-bottom: 1px solid var(--border); white-space: nowrap; }
  .log-table td { padding: 7px 10px; border-bottom: 1px solid var(--border); color: var(--text); white-space: nowrap; }
  .log-table tr:hover td { background: var(--bg-hover); }
  .log-table .status-ok { color: var(--ok); }
  .log-table .status-err { color: var(--danger); }
</style>
</head>
<body>

<!-- Sidebar -->
<nav class="sidebar" id="sidebar">
  <div class="sidebar-logo">
    <img src="/static/imgicon.png" alt="logo">
    <span class="logo-text"><em>Claw</em>Adapter <span style="font-size:0.65rem;color:var(--accent);font-weight:400;">v0.4</span></span>
  </div>
  <div class="sidebar-nav">
    <button class="nav-item active" onclick="switchTab('home')" data-tab="home">
      <span class="nav-icon"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg></span><span class="nav-label">首页</span>
    </button>
    <button class="nav-item" onclick="switchTab('vendors')" data-tab="vendors">
      <span class="nav-icon"><svg viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="8" rx="2"/><rect x="2" y="14" width="20" height="8" rx="2"/><circle cx="6" cy="6" r="1" fill="currentColor" stroke="none"/><circle cx="6" cy="18" r="1" fill="currentColor" stroke="none"/></svg></span><span class="nav-label">服务商</span>
    </button>
    <button class="nav-item" onclick="switchTab('adapters')" data-tab="adapters">
      <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"/><path d="M17 3l4 3-4 3"/></svg></span><span class="nav-label">运行服务</span>
    </button>
  </div>
  <div class="sidebar-footer">
    <button class="collapse-btn" onclick="toggleSidebar()" id="collapse-btn" title="折叠侧边栏">«</button>
  </div>
</nav>

<!-- Main content -->
<div class="main-content" id="main-content">
  <!-- Home -->
  <div id="panel-home" class="panel active">
    <!-- Stats cards -->
    <div id="stats-cards" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:20px;"></div>
    <!-- Dashboard filter bar -->
    <div id="dashboard-filter" style="display:flex;align-items:center;gap:10px;margin-bottom:16px;flex-wrap:wrap;">
      <span id="dashboard-context" style="color:var(--text-strong);font-size:0.9rem;font-weight:600;">全局概览</span>
      <button class="btn btn-sm" id="btn-reset-filter" style="display:none;" onclick="resetDashboardFilter()">✕ 清除筛选</button>
      <div style="flex:1;"></div>
      <select id="usage-range" style="width:auto;padding:4px 8px;font-size:0.78rem;" onchange="loadUsageChart()">
        <option value="7d">近 7 天</option>
        <option value="30d">近 30 天</option>
        <option value="1d">今天</option>
        <option value="all">全部</option>
      </select>
    </div>
    <!-- Charts row -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;">
      <div class="card" style="padding:12px;"><div id="usage-chart" style="width:100%;height:260px;"></div></div>
      <div class="card" style="padding:12px;"><div id="dist-chart" style="width:100%;height:260px;"></div></div>
    </div>
    <!-- Topology -->
    <p style="color:var(--muted);font-size:0.85rem;margin-bottom:12px;">服务商 → Key → 端点配置 → 运行服务 → 服务内端点 的配置流向 <span style="font-size:0.75rem;">(点击节点筛选看板)</span></p>
    <div id="topology-chart"></div>
    <!-- Request logs -->
    <div style="margin-top:20px;">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;">
        <span style="color:var(--text-strong);font-weight:600;font-size:0.9rem;">请求日志</span>
        <div class="btn-group">
          <button class="btn btn-sm" id="log-prev" onclick="logPage(-1)" disabled>上一页</button>
          <span id="log-page-info" style="color:var(--muted);font-size:0.78rem;padding:0 8px;"></span>
          <button class="btn btn-sm" id="log-next" onclick="logPage(1)">下一页</button>
        </div>
      </div>
      <div id="log-table-wrap" style="overflow-x:auto;"></div>
    </div>
  </div>

  <!-- Vendors -->
  <div id="panel-vendors" class="panel">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
      <span style="color:var(--muted);font-size:0.85rem;" id="vendor-count"></span>
      <button class="btn btn-accent" onclick="showAddVendor()">+ 添加服务商</button>
    </div>
    <div id="vendor-list"></div>
  </div>

  <!-- Adapters -->
  <div id="panel-adapters" class="panel">
    <p style="color:var(--muted);font-size:0.85rem;margin-bottom:16px;">管理各运行服务的配置路径，查看当前配置，推送或导入</p>
    <div id="adapter-list"></div>
  </div>
</div>

<!-- Vendor modal -->
<div id="modal-vendor" class="modal-overlay hidden" onclick="if(event.target===this)closeModal()">
  <div class="modal">
    <h2 id="modal-vendor-title">添加服务商</h2>
    <input type="hidden" id="edit-vendor-id">
    <div class="form-group">
      <label>图标</label>
      <div class="icon-upload" id="vendor-icon-upload">
        <div class="icon-upload-preview" id="vendor-icon-preview">上传</div>
        <input type="file" accept="image/*" onchange="uploadVendorIcon(this)">
      </div>
      <input type="hidden" id="f-v-icon">
    </div>
    <div class="form-group"><label>名称</label><input id="f-v-name" placeholder="如: 蓝星Claude"></div>
    <div class="form-group"><label>域名</label><input id="f-v-domain" placeholder="如: example.com"></div>
    <div class="form-group"><label>备注</label><textarea id="f-v-notes" rows="2" placeholder="可选"></textarea></div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal()">取消</button>
      <button class="btn btn-accent" onclick="saveVendor()">保存</button>
    </div>
  </div>
</div>

<!-- Provider modal -->
<div id="modal-provider" class="modal-overlay hidden" onclick="if(event.target===this)closeModal()">
  <div class="modal">
    <h2 id="modal-provider-title">添加配置</h2>
    <input type="hidden" id="edit-provider-id">
    <input type="hidden" id="f-p-vendor-id">
    <div class="form-group"><label>名称</label><input id="f-p-name" placeholder="如: lanxingClaude"></div>
    <div class="form-group"><label>Base URL</label><input id="f-p-url" placeholder="https://..."></div>
    <div class="form-group"><label>关联 Key</label><select id="f-p-key"><option value="">不关联 Key</option></select></div>
    <div class="form-group"><label>备注</label><textarea id="f-p-notes" rows="2" placeholder="可选"></textarea></div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal()">取消</button>
      <button class="btn btn-accent" onclick="saveProvider()">保存</button>
    </div>
  </div>
</div>

<!-- Push modal -->
<div id="modal-push" class="modal-overlay hidden" onclick="if(event.target===this)closeModal()">
  <div class="modal">
    <h2>推送配置到服务</h2>
    <p style="color:var(--muted);font-size:0.85rem;margin-bottom:12px;">选择要推送到的服务：</p>
    <div id="push-targets"></div>
    <input type="hidden" id="push-provider-id">
    <div class="modal-actions">
      <button class="btn" onclick="closeModal()">取消</button>
      <button class="btn btn-ghost-info" onclick="doPush()">推送</button>
    </div>
  </div>
</div>

<!-- Bind modal -->
<div id="modal-bind" class="modal-overlay hidden" onclick="if(event.target===this)closeModal()">
  <div class="modal">
    <h2>创建绑定</h2>
    <div class="form-group"><label>配置</label><select id="f-bind-provider"></select></div>
    <div class="form-group"><label>服务适配</label><select id="f-bind-adapter"></select></div>
    <div class="form-group"><label>目标 Provider Name（服务内部名称）</label><input id="f-bind-target" placeholder="如: ciClaude"></div>
    <div class="form-group"><label><input type="checkbox" id="f-bind-autosync" checked> 自动同步</label></div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal()">取消</button>
      <button class="btn btn-accent" onclick="saveBind()">绑定</button>
    </div>
  </div>
</div>

<!-- Adapter edit modal -->
<div id="modal-adapter" class="modal-overlay hidden" onclick="if(event.target===this)closeModal()">
  <div class="modal">
    <h2>编辑适配器</h2>
    <input type="hidden" id="adapter-edit-id">
    <div class="form-group">
      <label>图标</label>
      <div class="icon-upload" id="adapter-icon-upload">
        <div class="icon-upload-preview" id="adapter-icon-preview">上传</div>
        <input type="file" accept="image/*" onchange="uploadAdapterIcon(this)">
      </div>
      <input type="hidden" id="f-adapter-icon">
    </div>
    <div class="form-group"><label>配置路径</label><input id="f-adapter-path" placeholder="/path/to/config"></div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal()">取消</button>
      <button class="btn btn-accent" onclick="saveAdapterPath()">保存</button>
    </div>
  </div>
</div>

<!-- Confirm modal -->
<div id="modal-confirm" class="modal-overlay hidden" onclick="if(event.target===this)closeConfirm()">
  <div class="modal">
    <h2>确认操作</h2>
    <p id="confirm-text" style="color:var(--text);font-size:0.9rem;margin-bottom:8px;"></p>
    <div class="modal-actions">
      <button class="btn" onclick="closeConfirm()">取消</button>
      <button class="btn btn-ghost-danger" id="confirm-ok-btn" onclick="doConfirm()">确认</button>
    </div>
  </div>
</div>

<!-- Key modal -->
<div id="modal-key" class="modal-overlay hidden" onclick="if(event.target===this)closeModal()">
  <div class="modal">
    <h2 id="modal-key-title">添加 Key</h2>
    <input type="hidden" id="edit-key-id">
    <input type="hidden" id="f-k-vendor-id">
    <div class="form-group"><label>标签</label><input id="f-k-label" placeholder="如: 主力key、备用key"></div>
    <div class="form-group"><label>API Key</label><input id="f-k-key" type="password" placeholder="sk-..."></div>
    <div class="form-group"><label>备注</label><textarea id="f-k-notes" rows="2" placeholder="可选"></textarea></div>
    <div class="modal-actions">
      <button class="btn" onclick="closeModal()">取消</button>
      <button class="btn btn-accent" onclick="saveKey()">保存</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<script src="/static/app.js?v=19"></script>
</body>
</html>
